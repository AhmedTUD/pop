# Git Commands for fixing numpy/pandas compatibility issue

# 1. Add the updated requirements.txt to git
git add requirements.txt

# 2. Commit the changes
git commit -m "Fix numpy/pandas compatibility issue - add numpy==1.24.3 and downgrade Pillow to 10.0.1"

# 3. Pull latest changes from remote (if any)
git pull origin main

# 4. Push the changes to remote repository
git push origin main

# 5. Now rebuild Docker with the fixed requirements
cd /opt/pop-materials-new
docker-compose -f docker-compose.prod.yml down
docker system prune -f
docker rmi $(docker images -q pop-materials-new-pop-materials-app) 2>/dev/null || true
docker-compose -f docker-compose.prod.yml build --no-cache
docker-compose -f docker-compose.prod.yml up -d

# 6. Monitor logs to ensure no errors
docker-compose -f docker-compose.prod.yml logs -f